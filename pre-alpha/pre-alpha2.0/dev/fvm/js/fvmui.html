<!--
 * Copyright Â© 2017, Robert Gollagher.
 * SPDX-License-Identifier: GPL-3.0+
 * 
 * File:       fvmui.html
 * Author :    Robert Gollagher   robert.gollagher@freeputer.net
 * Created:    20170303
 * Updated:    20170520-1408+
 * Version:    pre-alpha-0.0.0.22 for FVM 2.0
-->
<!DOCTYPE html>
<html>
<head>
<title>FVM</title>
<meta charset="UTF-8">
<script src="fvm2.js"></script>
<script src="prgBase64.js"></script>
<script>
window.onload = function() { 'use strict';
  var prg = Uint8Array.from(atob(prgBase64), c => c.charCodeAt(0)).buffer;
  modFVMUI = modFVMUI_init(prg);
};

// Module modFVMUI connects this UI to an FVM provided by modFVM.
var modFVMUI;
function modFVMUI_init(prg) { 'use strict';

  var elem = x => document.getElementById(x);
  var fvmStdout = elem('fvmStdout');
  var fvmUsrout = elem('fvmUsrout');
  var fvmGrdout = elem('fvmGrdout');
  var fvmStdlog = elem('fvmStdlog');
  var fvmStdtrc = elem('fvmStdtrc');

  function clear() {
    var clr = x => {x.textContent = ''};
    clr(fvmStdout);
    clr(fvmUsrout);
    clr(fvmGrdout);
    clr(fvmStdlog);
    clr(fvmStdtrc);
  };

  function run() {
    var cf = modFVM.makeConfig(prg);
    var chr = x => String.fromCharCode(x);
    cf.fnStdout = x => fvmStdout.textContent+=chr(x);
    cf.fnUsrout = x => fvmUsrout.textContent+=chr(x);
    cf.fnGrdout = x => fvmGrdout.textContent+=chr(x);
    cf.fnLog = x => fvmStdlog.textContent+=chr(x);
    cf.fnTrc = x => fvmStdtrc.textContent+=x+'\n';
    cf.RAMa = 0x1000000;
    cf.RAMz = 0x1000400;
    modFVM.makeFVM(cf).run();
  };

  return {
    clear: clear,
    run : run
  };
}; // modFVMUI
</script>
<link rel="stylesheet" type="text/css" href="fvm.css">
</head>

<body>
  <div class="fvmDiv">
    <h2>Freeputer Virtual Machine</h2>
    <table class="fvmMaxed">
       <tr>
        <td>     
          <input type="button" id="restartFVM" value="Restart" title="Start or restart the FVM instance" onclick="modFVMUI.run()"/>
          <input type="button" id="clear" value="Clear" title="Clear previous output" onclick="modFVMUI.clear()"/>
          <span class="fvmWarning">Incomplete</span> pre-alpha-0.0.0.22 for FVM 2.0.
        </td>
      </tr>
       <tr>
        <td>
        </td>
      </tr>
      <tr>
        <td>
          <table class="fvmMaxed">
            <tr>
              <td>
                <b>stdtrc</b>
              </td>
            </tr>
            <tr>
              <td class="fvmOut fvmScroll">
                  <pre><code><span id="fvmStdtrc"></span></code></pre>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <table class="fvmMaxed">
            <tr>
              <td>
                <b>stdlog</b>
              </td>
            </tr>
            <tr>
              <td class="fvmOut fvmSmall fvmScroll">
                  <pre><code><span id="fvmStdlog"></span></code></pre>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <table class="fvmMaxed">
            <tr>
              <td>
                <b>stdout</b>
              </td>
            </tr>
            <tr>
              <td class="fvmOut fvmSmall fvmScroll">
                  <pre><code><span id="fvmStdout"></span></code></pre>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <table class="fvmMaxed">
            <tr>
              <td>
                <b>grdout</b>
              </td>
            </tr>
            <tr>
              <td class="fvmOut fvmSmall fvmScroll">
                  <pre><code><span id="fvmGrdout"></span></code></pre>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <table class="fvmMaxed">
            <tr>
              <td>
                <b>usrout</b>
              </td>
            </tr>
            <tr>
              <td class="fvmOut fvmSmall fvmScroll">
                  <pre><code><span id="fvmUsrout"></span></code></pre>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </div>
</body>
</html>
